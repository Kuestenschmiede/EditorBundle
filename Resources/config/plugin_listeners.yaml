services:
    ## Load plugins
    editor.onLoadPluginsGetRegisteredBundles:
        class: con4gis\EditorBundle\Classes\Listener\LoadPluginsListener
        tags:
            - { name: kernel.event_listener, event: editor.load.plugins, method: onLoadPluginsGetRegisteredBundles, priority: 4096 }
        arguments:
            - '@service_container'
            - '@file_locator'

    editor.onLoadPluginsReadConfigFiles:
        class: con4gis\EditorBundle\Classes\Listener\LoadPluginsListener
        tags:
            - { name: kernel.event_listener, event: editor.load.plugins, method: onLoadPluginsReadConfigFiles, priority: 3072 }
        arguments:
            - '@service_container'
            - '@file_locator'

    ## Instantiate data plugins
    editor.onInstantiatePluginsGetElement:
        class: con4gis\EditorBundle\Classes\Listener\InstantiateDataPluginsListener
        tags:
            - { name: kernel.event_listener, event: editor.dataplugins.instantiate, method: onInstantiatePluginsGetElement, priority: 3072 }
        arguments:
            - '@doctrine.orm.default_entity_manager'

    editor.onInstantiatePluginsFilterPlugins:
        class: con4gis\EditorBundle\Classes\Listener\InstantiateDataPluginsListener
        tags:
            - { name: kernel.event_listener, event: editor.dataplugins.instantiate, method: onInstantiatePluginsFilterPlugins, priority: 2048 }
        arguments:
            - '@doctrine.orm.default_entity_manager'

    editor.onInstantiatePluginsInstantiatePlugins:
        class: con4gis\EditorBundle\Classes\Listener\InstantiateDataPluginsListener
        tags:
            - { name: kernel.event_listener, event: editor.dataplugins.instantiate, method: onInstantiatePluginsInstantiatePlugins, priority: 1024 }
        arguments:
            - '@doctrine.orm.default_entity_manager'

    ## Instantiate project plugins
    editor.onInstantiateProjectPluginsGetDefaultPlugin:
        class: con4gis\EditorBundle\Classes\Listener\InstantiateProjectPluginsListener
        tags:
            - { name: kernel.event_listener, event: editor.projectplugins.instantiate, method: onInstantiateProjectPluginsGetDefaultPlugin, priority: 1025 }
        arguments:
            - '@doctrine.orm.default_entity_manager'

    editor.onInstantiateProjectPluginsInstantiatePlugins:
        class: con4gis\EditorBundle\Classes\Listener\InstantiateProjectPluginsListener
        tags:
            - { name: kernel.event_listener, event: editor.projectplugins.instantiate, method: onInstantiateProjectPluginsInstantiatePlugins, priority: 1024 }
        arguments:
            - '@doctrine.orm.default_entity_manager'